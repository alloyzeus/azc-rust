module: iam
symbols:

  - identifier: User
    abstract: User
    kind: entity
    parameters:
      creation: "TODO: the rule of the creation (affects service)"
      id:
        space: 48
        generator:
          name: OfflineRandomIntegerIDGenerator
          parameters:
            encodings:
              text:
                prefix: "ix-"
      mixins:
        - name: Deletable
          parameters:
            event_emission:
              enabled: true
      service:
        api:
          protocols:
            #?RFC: versioning?
            rest:
              enabled: true
            grpc:
              enabled: true

  - identifier: Application
    kind: entity
    parameters:
      mixins:
        - name: Ownable
          parameters:
            owner_arity: [1, 4]
      attributes:
        access_keys:
          kind: set
          parameters:
            kind: AccessKey
            fields: [id]
            arity: [1, 4]

  - identifier: Terminal
    kind: adjunct
    parameters:
      is_entity: true
      # At least one
      entities:
        - Application
      mixins:
        - name: Deletable

  - identifier: Authorization
    kind: adjunct
    parameters:
      is_entity: true
      arity:
        min: 0
        max: -1
      entities:
        - Terminal
      mixins:
        - name: Deletable
        - name: TimeBound
          parameters:
            config_options:
              duration: enabled
        
