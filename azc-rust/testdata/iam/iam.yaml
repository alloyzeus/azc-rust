module: iam
symbols:

  - identifier: User
    abstract: User
    kind: entity
    parameters:
      creation: "TODO: the rule of the creation (affects service)"
      id:
        space: 48
        generator:
          name: OfflineRandomIntegerIDGenerator
          parameters:
            encodings:
              text:
                prefix: "ix-"
      mixins:
        - kind: Deletable
          parameters:
            event_emission:
              enabled: true
      service:
        api:
          protocols:
            #?RFC: versioning?
            rest:
              enabled: true
            grpc:
              enabled: true

  - identifier: Application
    kind: entity
    parameters:
      mixins:
        - kind: Ownable
          parameters:
            owner_arity: [1, 4]
      attributes:
        access_keys:
          kind: set
          parameters:
            kind: AccessKey
            fields: [id]
            arity: [1, 4]

  - identifier: Terminal
    kind: adjunct
    parameters:
      kind: entity
      # At least one
      hosts:
        - name: Application
      parameters:
        mixins:
          - kind: Deletable

  - identifier: Authorization
    kind: adjunct
    parameters:
      kind: entity
      hosts:
        - name: Terminal
      arity:
        min: 0
        max: -1
      parameters:
        mixins:
          - kind: Deletable
          - kind: TimeBound
            parameters:
              duration:
                overridable: true
                value:
                  quantity: 1440
                  unit: hour
        
